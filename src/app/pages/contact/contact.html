<!-- Hero Section -->
<app-section spacing="xl" background="blue">
  <div class="text-center max-w-4xl mx-auto">
    <h1 class="text-5xl md:text-6xl font-bold text-gray-900 mb-6">Contáctanos</h1>
    <p class="text-xl text-gray-700 mb-8">
      ¿Tienes preguntas? Estamos aquí para ayudarte. Envíanos un mensaje y nos pondremos en contacto
      contigo lo antes posible.
    </p>
  </div>
</app-section>

<!-- Contact Info Section -->
<app-section spacing="xl" background="white">
  <div class="max-w-5xl mx-auto">
    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12">
      @for (info of contactInfo(); track info.id) {
        <app-card [hover]="true" padding="lg">
          <div class="text-center">
            <div class="inline-flex items-center justify-center mb-4">
              <div class="bg-gradient-to-br from-blue-500 to-indigo-600 p-4 rounded-xl shadow-lg">
                <span class="material-symbols-outlined text-white text-4xl">
                  {{ info.icon }}
                </span>
              </div>
            </div>
            <h3 class="text-lg font-semibold text-gray-900 mb-2">{{ info.title }}</h3>
            <p class="text-sm text-gray-600">{{ info.value }}</p>
          </div>
        </app-card>
      }
    </div>
  </div>
</app-section>

<!-- Contact Form Section -->
<app-section spacing="xl" background="gray">
  <div class="max-w-3xl mx-auto">
    <div class="bg-white/80 backdrop-blur-sm rounded-2xl shadow-xl border border-blue-100 p-8">
      <div class="text-center mb-8">
        <h2 class="text-3xl font-bold text-gray-900 mb-2">Envíanos un Mensaje</h2>
        <p class="text-gray-600">Completa el formulario y te responderemos pronto</p>
      </div>

      <form (submit)="$event.preventDefault(); submit()" class="space-y-6">
        <!-- Name -->
        <div>
          <app-input
            [label]="'Nombre Completo *'"
            [type]="'text'"
            [placeholder]="'Tu nombre completo'"
            [value]="name()"
            (valueChange)="name.set($event)"
            [required]="true"
            [invalid]="name().trim().length > 0 && name().trim().length < 2"
            [errorMessage]="'El nombre debe tener al menos 2 caracteres'"
          />
        </div>

        <!-- Email -->
        <div>
          <app-input
            [label]="'Email *'"
            [type]="'email'"
            [placeholder]="'tu@email.com'"
            [icon]="'mail'"
            [value]="email()"
            (valueChange)="email.set($event)"
            [required]="true"
            [invalid]="email().trim().length > 0 && !isEmailValid(email().trim())"
            [errorMessage]="'Ingresa un email válido'"
          />
        </div>

        <!-- Phone (optional) -->
        <div>
          <app-input
            [label]="'Teléfono'"
            [type]="'tel'"
            [placeholder]="'+1 (809) 555-1234'"
            [icon]="'phone'"
            [value]="phone()"
            (valueChange)="phone.set($event)"
          />
        </div>

        <!-- Message -->
        <div>
          <label for="message" class="block text-sm font-medium text-gray-700 mb-1.5">
            Mensaje *
          </label>
          <textarea
            id="message"
            rows="6"
            [value]="message()"
            (input)="message.set($any($event.target).value)"
            placeholder="Cuéntanos cómo podemos ayudarte..."
            class="block w-full rounded-lg border px-4 py-2.5 text-gray-900 placeholder-gray-400 focus:outline-none focus:ring-2 transition-all"
            [class.border-gray-300]="!(message().trim().length > 0 && message().trim().length < 10)"
            [class.focus:ring-blue-500]="
              !(message().trim().length > 0 && message().trim().length < 10)
            "
            [class.focus:border-blue-500]="
              !(message().trim().length > 0 && message().trim().length < 10)
            "
            [class.border-red-500]="message().trim().length > 0 && message().trim().length < 10"
            [class.focus:ring-red-500]="message().trim().length > 0 && message().trim().length < 10"
            [class.focus:border-red-500]="
              message().trim().length > 0 && message().trim().length < 10
            "
          ></textarea>
          @if (message().trim().length > 0 && message().trim().length < 10) {
            <p class="text-red-600 text-xs mt-1">El mensaje debe tener al menos 10 caracteres</p>
          }
        </div>

        <!-- Error Message -->
        @if (formError()) {
          <div
            class="bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg flex items-center gap-2"
          >
            <span class="material-symbols-outlined">error</span>
            <span>{{ formError() }}</span>
          </div>
        }

        <!-- Success Message -->
        @if (formSuccess()) {
          <div
            class="bg-green-50 border border-green-200 text-green-700 px-4 py-3 rounded-lg flex items-center gap-2"
          >
            <span class="material-symbols-outlined">check_circle</span>
            <span>{{ formSuccess() }}</span>
          </div>
        }

        <!-- Submit Button -->
        <div>
          <app-button
            [variant]="'primary'"
            [size]="'lg'"
            [fullWidth]="true"
            [disabled]="!canSubmit() || loading()"
            (click)="submit()"
          >
            {{ loading() ? 'Enviando…' : 'Enviar Mensaje' }}
          </app-button>
        </div>
      </form>
    </div>
  </div>
</app-section>

<!-- FAQ Section -->
<app-section spacing="xl" background="white">
  <div class="max-w-4xl mx-auto">
    <div class="text-center mb-12">
      <h2 class="text-4xl font-bold text-gray-900 mb-4">Preguntas Frecuentes</h2>
      <p class="text-lg text-gray-600">Encuentra respuestas rápidas a preguntas comunes</p>
    </div>

    <div class="space-y-3">
      <div
        class="bg-white/80 backdrop-blur-sm rounded-xl shadow-md border border-gray-200 overflow-hidden transition-all"
        [class.ring-2]="expandedQuestion() === 'faq1'"
        [class.ring-blue-500]="expandedQuestion() === 'faq1'"
      >
        <button
          type="button"
          (click)="toggleQuestion('faq1')"
          class="w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors"
        >
          <span class="text-lg font-semibold text-gray-900 pr-4">
            ¿Cuál es el tiempo de respuesta?
          </span>
          <span
            class="material-symbols-outlined text-gray-500 flex-shrink-0 transition-transform"
            [class.rotate-180]="expandedQuestion() === 'faq1'"
          >
            expand_more
          </span>
        </button>
        @if (expandedQuestion() === 'faq1') {
          <div class="px-4 pb-4 text-gray-700 leading-relaxed border-t border-gray-200 pt-4">
            Normalmente respondemos en un plazo de 24-48 horas hábiles. Para asuntos urgentes,
            puedes llamarnos directamente al teléfono proporcionado.
          </div>
        }
      </div>

      <div
        class="bg-white/80 backdrop-blur-sm rounded-xl shadow-md border border-gray-200 overflow-hidden transition-all"
        [class.ring-2]="expandedQuestion() === 'faq2'"
        [class.ring-blue-500]="expandedQuestion() === 'faq2'"
      >
        <button
          type="button"
          (click)="toggleQuestion('faq2')"
          class="w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors"
        >
          <span class="text-lg font-semibold text-gray-900 pr-4"> ¿Ofrecen demostraciones? </span>
          <span
            class="material-symbols-outlined text-gray-500 flex-shrink-0 transition-transform"
            [class.rotate-180]="expandedQuestion() === 'faq2'"
          >
            expand_more
          </span>
        </button>
        @if (expandedQuestion() === 'faq2') {
          <div class="px-4 pb-4 text-gray-700 leading-relaxed border-t border-gray-200 pt-4">
            Sí, ofrecemos demostraciones personalizadas de la plataforma. Contáctanos para agendar
            una sesión que se ajuste a tus necesidades.
          </div>
        }
      </div>

      <div
        class="bg-white/80 backdrop-blur-sm rounded-xl shadow-md border border-gray-200 overflow-hidden transition-all"
        [class.ring-2]="expandedQuestion() === 'faq3'"
        [class.ring-blue-500]="expandedQuestion() === 'faq3'"
      >
        <button
          type="button"
          (click)="toggleQuestion('faq3')"
          class="w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors"
        >
          <span class="text-lg font-semibold text-gray-900 pr-4">
            ¿Cómo puedo obtener soporte técnico?
          </span>
          <span
            class="material-symbols-outlined text-gray-500 flex-shrink-0 transition-transform"
            [class.rotate-180]="expandedQuestion() === 'faq3'"
          >
            expand_more
          </span>
        </button>
        @if (expandedQuestion() === 'faq3') {
          <div class="px-4 pb-4 text-gray-700 leading-relaxed border-t border-gray-200 pt-4">
            Puedes contactarnos por email, teléfono o a través del formulario de contacto. También
            puedes visitar nuestra sección de Ayuda para encontrar guías y tutoriales.
          </div>
        }
      </div>

      <div
        class="bg-white/80 backdrop-blur-sm rounded-xl shadow-md border border-gray-200 overflow-hidden transition-all"
        [class.ring-2]="expandedQuestion() === 'faq4'"
        [class.ring-blue-500]="expandedQuestion() === 'faq4'"
      >
        <button
          type="button"
          (click)="toggleQuestion('faq4')"
          class="w-full flex items-center justify-between p-4 text-left hover:bg-gray-50 transition-colors"
        >
          <span class="text-lg font-semibold text-gray-900 pr-4">
            ¿Tienen planes personalizados?
          </span>
          <span
            class="material-symbols-outlined text-gray-500 flex-shrink-0 transition-transform"
            [class.rotate-180]="expandedQuestion() === 'faq4'"
          >
            expand_more
          </span>
        </button>
        @if (expandedQuestion() === 'faq4') {
          <div class="px-4 pb-4 text-gray-700 leading-relaxed border-t border-gray-200 pt-4">
            Sí, ofrecemos planes personalizados según el tamaño de tu institución y necesidades
            específicas. Contáctanos para discutir las opciones disponibles.
          </div>
        }
      </div>
    </div>
  </div>
</app-section>
