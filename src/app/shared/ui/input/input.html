<div [class]="containerClasses()">
  <!-- Label -->
  @if (label()) {
    <label [for]="id()" [class]="labelClasses()">
      {{ label() }}
      @if (required()) {
        <span class="text-red-500 ml-1">*</span>
      }
    </label>
  }

  <!-- Input Container -->
  <div class="relative">
    <!-- Leading Icon -->
    @if (icon()) {
      <div
        class="absolute left-3 top-1/2 -translate-y-1/2 pointer-events-none"
        [class.text-red-400]="invalid()"
        [class.text-gray-400]="!invalid()"
      >
        <span class="material-symbols-outlined text-xl">{{ icon() }}</span>
      </div>
    }

    <!-- Input Field -->
    <input
      [id]="id()"
      [type]="type() === 'password' ? getPasswordInputType() : type()"
      [placeholder]="placeholder()"
      [disabled]="disabled()"
      [value]="value()"
      [required]="required()"
      [class]="inputClasses()"
      (input)="onInput($event)"
      (focus)="onFocus()"
      (blur)="onBlur()"
    />

    <!-- Password Toggle Button -->
    @if (type() === 'password') {
      <button
        type="button"
        (click)="togglePasswordVisibility()"
        class="absolute right-3 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600 focus:outline-none focus:text-gray-600 transition-colors"
        [disabled]="disabled()"
      >
        <span class="material-symbols-outlined text-xl">
          {{ showPassword() ? 'visibility_off' : 'visibility' }}
        </span>
      </button>
    }
  </div>

  <!-- Error Message -->
  @if (invalid() && errorMessage()) {
    <p class="mt-1.5 text-sm text-red-600 flex items-center">
      <span class="material-symbols-outlined text-base mr-1">error</span>
      {{ errorMessage() }}
    </p>
  }

  <!-- Help Text -->
  @if (!invalid() && helpText()) {
    <p class="mt-1.5 text-sm text-gray-500">{{ helpText() }}</p>
  }
</div>
